default_stages: [ pre-commit ]

repos:
  - repo: local
    hooks:
      - id: nox
        name: Nox
        entry: nox -f noxfile.py --session lint -- fix
        pass_filenames: false
        language: system
        types: [ python ]
        verbose: true

  - repo: local
    hooks:
      - id: uv-pip-compile
        name: uv pip-compile prod
        description: Automatically compile requirements.
        entry: uv pip compile pyproject.toml -o prod-requirements.txt
        additional_dependencies: [ "uv" ]
        language: python
        files: (pyproject\.toml$|prod\-requirements\.txt$)
        pass_filenames: false
        always_run: false

      - id: uv-pip-compile
        name: uv pip-compile dev
        description: Automatically compile requirements.
        entry: uv pip compile pyproject.toml --extra dev --extra test -o requirements.txt
        additional_dependencies: [ "uv" ]
        language: python
        files: (pyproject\.toml$|requirements\.txt$)
        pass_filenames: false
        always_run: false

      - id: uv-pip-compile
        name: uv pip-compile test
        description: Automatically compile requirements.
        entry: uv pip compile pyproject.toml --extra test -o test-requirements.txt
        additional_dependencies: [ "uv" ]
        language: python
        files: (pyproject\.toml$|test-requirements\.txt$)
        pass_filenames: false
        always_run: false
